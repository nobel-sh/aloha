fun check_greater_than_five(x: number) -> number {
    if (x > 5) {
        return 1;
    } else {
        return 2;
    }
}

fun test_basic_if_else() -> void {
    imut x: number = 10;
    imut result: number = check_greater_than_five(x);
    assert_msg(result == 1, "If-else: x > 5 should take true branch");
    
    imut y: number = 3;
    imut result2: number = check_greater_than_five(y);
    assert_msg(result2 == 2, "If-else: y <= 5 should take false branch");
    
    println("[PASS] Basic if-else tests passed");
}

fun categorize_number(x: number) -> number {
    if (x < 10) {
        return 1;
    } else {
        if (x < 20) {
            return 2;
        } else {
            return 3;
        }
    }
}

fun test_nested_if_else() -> void {
    imut x: number = 15;
    imut category: number = categorize_number(x);
    assert_msg(category == 2, "Nested if-else: 15 should be in category 2");
    
    imut y: number = 25;
    imut category2: number = categorize_number(y);
    assert_msg(category2 == 3, "Nested if-else: 25 should be in category 3");
    
    println("[PASS] Nested if-else tests passed");
}

fun test_boolean_logic() -> void {
    imut a: bool = true;
    imut b: bool = false;
    
    assert_msg(a == true, "Boolean: a should be true");
    assert_msg(b == false, "Boolean: b should be false");
    
    imut x: number = 10;
    imut is_positive: bool = x > 0;
    assert_msg(is_positive == true, "Boolean expression: 10 > 0 should be true");
    
    imut y: number = -5;
    imut is_negative: bool = y < 0;
    assert_msg(is_negative == true, "Boolean expression: -5 < 0 should be true");
    
    println("[PASS] Boolean logic tests passed");
}

fun check_can_drive(age: number, has_license: bool) -> bool {
    if (age >= 18) {
        if (has_license == true) {
            return true;
        } else {
            return false;
        }
    } else {
        return false;
    }
}

fun calculate_grade(score: number) -> number {
    if (score >= 90) {
        return 5;
    } else {
        if (score >= 80) {
            return 4;
        } else {
            if (score >= 70) {
                return 3;
            } else {
                if (score >= 60) {
                    return 2;
                } else {
                    return 1;
                }
            }
        }
    }
}

fun test_complex_conditions() -> void {
    imut age: number = 25;
    imut has_license: bool = true;
    imut can_drive: bool = check_can_drive(age, has_license);
    assert_msg(can_drive == true, "Complex condition: age >= 18 and has_license should allow driving");
    
    imut score: number = 85;
    imut grade: number = calculate_grade(score);
    assert_msg(grade == 4, "Multi-level grading: score 85 should get grade 4");
    
    println("[PASS] Complex condition tests passed");
}

fun test_return_in_branches() -> number {
    imut x: number = 10;
    
    if (x > 5) {
        return 100;
    } else {
        return 200;
    }
}

fun test_early_return() -> void {
    imut result: number = test_return_in_branches();
    assert_msg(result == 100, "Return in branch: should return 100");
    
    println("[PASS] Return in branches tests passed");
}

fun classify_number(n: number) -> number {
    if (n < 0) {
        return -1;
    } else {
        if (n == 0) {
            return 0;
        } else {
            return 1;
        }
    }
}

fun test_function_with_branches() -> void {
    imut neg_class: number = classify_number(-10);
    assert_msg(neg_class == -1, "classify_number(-10) should return -1");
    
    imut zero_class: number = classify_number(0);
    assert_msg(zero_class == 0, "classify_number(0) should return 0");
    
    imut pos_class: number = classify_number(42);
    assert_msg(pos_class == 1, "classify_number(42) should return 1");
    
    println("[PASS] Function with branches tests passed");
}

fun check_in_range(x: number) -> bool {
    if (x > 0) {
        if (x < 100) {
            return true;
        } else {
            return false;
        }
    } else {
        return false;
    }
}

fun test_chained_comparisons() -> void {
    imut x: number = 50;
    imut in_range: bool = check_in_range(x);
    assert_msg(in_range == true, "Chained comparison: 50 should be in range 0-100");
    
    imut y: number = 150;
    imut out_of_range: bool = check_in_range(y);
    assert_msg(out_of_range == false, "Chained comparison: 150 should be out of range");
    
    println("[PASS] Chained comparison tests passed");
}

fun main() -> number {
    println("=== Running Control Flow Tests ===");
    
    test_basic_if_else();
    test_nested_if_else();
    test_boolean_logic();
    test_complex_conditions();
    test_early_return();
    test_function_with_branches();
    test_chained_comparisons();
    
    println("\n[SUCCESS] All tests passed!");
    return 0;
}
